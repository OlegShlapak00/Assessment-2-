<div class="container my-5">
  <div class="mat-elevation-z8" style="overflow-x: auto;">
    <table mat-table [dataSource]="dataSource" matSort>

      <ng-container matColumnDef="details.student.firstName" >
        <th mat-header-cell *matHeaderCellDef class="text-center"> Name </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          {{element.details.student.firstName}}
          {{element.details.student.lastName}}
        </td>
      </ng-container>

      <ng-container matColumnDef="details.school.schoolName">
        <th mat-header-cell *matHeaderCellDef class="text-center"> School Name </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          {{element.details.school.schoolName}}
        </td>
      </ng-container>

      <ng-container matColumnDef="details.summary">
        <th mat-header-cell *matHeaderCellDef class="text-center" style="width: 5%;"> Summary </th>
        <td mat-cell *matCellDef="let element" class="text-center" style="width: 5%;">
          <p>{{element.details.summary.slice(0, 45)}}
            <span *ngIf="element.details.summary.length > 50" style="cursor:pointer;" (click)="openDialog(element.details.summary)">...</span>
          </p>
        </td>
      </ng-container>

      <ng-container matColumnDef="details.subject">
        <th mat-header-cell *matHeaderCellDef class="text-center"> Subject </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          {{element.details.subject}}
        </td>
      </ng-container>

      <ng-container matColumnDef="details.course_number">
        <th mat-header-cell *matHeaderCellDef class="text-center"> Coures No. </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          {{element.details.course_number }}
        </td>
      </ng-container>

      <ng-container matColumnDef="details.grade_value">
        <th mat-header-cell *matHeaderCellDef class="text-center"> Grade Value </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          {{element.details.grade_value }}
        </td>
      </ng-container>

      <ng-container matColumnDef="details.level">
        <th mat-header-cell *matHeaderCellDef class="text-center"> Level </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          {{element.details.level }}
        </td>
      </ng-container>

      <ng-container matColumnDef="details.semester">
        <th mat-header-cell *matHeaderCellDef class="text-center"> Semester </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          {{element.details.semester }}
        </td>
      </ng-container>

      <ng-container matColumnDef="details.discipline">
        <th mat-header-cell *matHeaderCellDef class="text-center"> Discipline </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          {{element.details.discipline }}
        </td>
      </ng-container>

      <ng-container matColumnDef="details.graded_url">
        <th mat-header-cell *matHeaderCellDef class="text-center"> URLs </th>
        <td mat-cell *matCellDef="let element" class="text-center">
          <a style="margin-bottom: 5px;" [href]="element.details.graded_url">Graded URL</a>
          <br>
          <a [href]="element.details.ungraded_url">Ungraded URL</a>
        </td>
      </ng-container>

      <ng-container matColumnDef="details.status">
        <th mat-header-cell *matHeaderCellDef class="text-center"> Status </th>
        <td mat-cell *matCellDef="let element" class="text-center">

          <select (change)="changeStatus($event.target, element)">
            <option value="0" [selected]="0 === element.details.status">inactive
            </option>
            <option value="1" [selected]="1 === element.details.status">active
            </option>
          </select>

        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
  </div>

</div>
